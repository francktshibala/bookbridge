<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>BookBridge Mobile PWA Wireframe</title>
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: system-ui, -apple-system, "Segoe UI", "Noto Sans", sans-serif;
            background: #0f172a;
            color: #e2e8f0;
            overflow-x: hidden;
        }

        /* Mobile Container */
        .mobile-container {
            max-width: 375px;
            margin: 20px auto;
            background: #1e293b;
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            position: relative;
            min-height: 812px;
        }

        /* Status Bar Simulation */
        .status-bar {
            height: 44px;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            font-size: 14px;
            font-weight: 600;
            color: white;
        }

        /* Mobile Header - 56px height */
        .mobile-header {
            height: 56px;
            background: rgba(30, 41, 59, 0.95);
            backdrop-filter: blur(8px);
            border-bottom: 1px solid #334155;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo {
            width: 24px;
            height: 24px;
            background: #3b82f6;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 12px;
            color: white;
        }

        .hamburger-menu {
            width: 44px;
            height: 44px;
            border: none;
            background: none;
            color: #94a3b8;
            font-size: 20px;
            cursor: pointer;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hamburger-menu:hover {
            background: rgba(148, 163, 184, 0.1);
        }

        /* CEFR Level Selector */
        .cefr-selector {
            display: flex;
            gap: 2px;
            margin-right: 8px;
        }

        .cefr-button {
            width: 36px;
            height: 32px;
            border: 1px solid #334155;
            background: #1e293b;
            color: #94a3b8;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            min-width: 44px; /* Touch target */
            margin: -6px -4px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cefr-button.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        .cefr-button:hover:not(.active) {
            background: #334155;
            color: #e2e8f0;
        }

        /* Reading Content Area */
        .reading-content {
            padding: 20px;
            max-width: 600px;
            width: 90%;
            margin: 0 auto;
            min-height: calc(100vh - 200px);
        }

        .book-title {
            font-size: 24px;
            font-weight: 700;
            color: #e2e8f0;
            text-align: center;
            margin-bottom: 8px;
        }

        .book-author {
            font-size: 16px;
            color: #94a3b8;
            text-align: center;
            font-style: italic;
            margin-bottom: 32px;
        }

        .reading-paragraph {
            font-size: 18px;
            line-height: 1.6;
            color: #cbd5e0;
            margin-bottom: 24px;
            text-align: justify;
            hyphens: auto;
            letter-spacing: 0.01em;
        }

        /* Word Highlighting */
        .word-highlight-current {
            background: linear-gradient(120deg, 
                rgba(16, 185, 129, 0.3) 0%, 
                rgba(16, 185, 129, 0.4) 100%);
            border-radius: 3px;
            padding: 1px 2px;
            font-weight: 600;
            box-shadow: 0 0 8px rgba(16, 185, 129, 0.2);
        }

        .word-highlight-upcoming {
            background: rgba(59, 130, 246, 0.15);
            border-radius: 2px;
            padding: 0 1px;
        }

        /* Mobile Audio Controls - Fixed bottom */
        .mobile-audio-controls {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            max-width: 335px; /* Adjust for mobile container */
            margin: 0 auto;
            height: 72px;
            background: rgba(30, 41, 59, 0.95);
            backdrop-filter: blur(16px);
            border: 1px solid #334155;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            padding: 0 20px;
            z-index: 900;
        }

        /* Primary Play Button - 64px */
        .primary-audio-button {
            width: 64px;
            height: 64px;
            border-radius: 32px;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
            transition: all 0.2s;
        }

        .primary-audio-button:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 16px rgba(59, 130, 246, 0.4);
        }

        .primary-audio-button:active {
            transform: scale(0.95);
        }

        /* Secondary Audio Buttons - 48px */
        .secondary-audio-button {
            width: 48px;
            height: 48px;
            border-radius: 24px;
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.2);
            color: #60a5fa;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .secondary-audio-button:hover {
            background: rgba(59, 130, 246, 0.2);
            color: #93c5fd;
        }

        /* Progress Bar Container */
        .audio-progress-container {
            flex: 1;
            height: 44px;
            display: flex;
            align-items: center;
            padding: 0 8px;
            cursor: pointer;
        }

        .audio-progress-bar {
            width: 100%;
            height: 4px;
            background: #334155;
            border-radius: 2px;
            position: relative;
            overflow: hidden;
        }

        .audio-progress-fill {
            height: 100%;
            background: #3b82f6;
            border-radius: 2px;
            width: 35%; /* Demo progress */
            transition: width 0.1s ease;
        }

        /* Time Display */
        .audio-time-display {
            font-size: 12px;
            font-weight: 500;
            color: #94a3b8;
            min-width: 35px;
            text-align: center;
            margin-left: 8px;
        }

        /* PWA Install Prompt */
        .pwa-install-prompt {
            position: fixed;
            bottom: 100px;
            left: 20px;
            right: 20px;
            max-width: 335px;
            margin: 0 auto;
            background: white;
            color: #212121;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.15);
            z-index: 1200;
            display: none;
        }

        .pwa-install-prompt.show {
            display: block;
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .install-prompt-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .install-prompt-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }

        .install-prompt-title {
            font-size: 18px;
            font-weight: 600;
            color: #212121;
            margin: 0;
        }

        .install-prompt-subtitle {
            font-size: 14px;
            color: #666;
            margin: 0;
        }

        .install-benefits {
            list-style: none;
            margin: 16px 0;
        }

        .install-benefit {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 4px 0;
            font-size: 14px;
            color: #424242;
        }

        .install-actions {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .install-button {
            flex: 1;
            height: 44px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .install-button-primary {
            background: #3b82f6;
            color: white;
        }

        .install-button-secondary {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        /* Navigation Edges */
        .navigation-edge {
            position: absolute;
            top: 0;
            bottom: 72px; /* Above audio controls */
            width: 15%;
            z-index: 10;
            cursor: pointer;
            opacity: 0;
            background: linear-gradient(to right, rgba(59, 130, 246, 0.1), transparent);
            transition: opacity 0.2s;
        }

        .navigation-edge-left {
            left: 0;
        }

        .navigation-edge-right {
            right: 0;
            background: linear-gradient(to left, rgba(59, 130, 246, 0.1), transparent);
        }

        .navigation-edge:hover {
            opacity: 1;
        }

        /* Bottom Sheet for Settings */
        .audio-settings-sheet {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #1e293b;
            border-radius: 16px 16px 0 0;
            border: 1px solid #334155;
            border-bottom: none;
            transform: translateY(100%);
            transition: transform 0.25s ease-out;
            z-index: 1100;
            max-height: 60vh;
            display: none;
        }

        .audio-settings-sheet.open {
            transform: translateY(0);
            display: block;
        }

        .sheet-handle {
            width: 32px;
            height: 4px;
            background: #64748b;
            border-radius: 2px;
            margin: 8px auto 16px;
        }

        .speed-control, .voice-selection {
            padding: 20px;
            border-bottom: 1px solid #334155;
        }

        .control-label {
            font-size: 16px;
            font-weight: 600;
            color: #e2e8f0;
            margin-bottom: 12px;
        }

        .speed-slider {
            width: 100%;
            height: 44px;
            background: rgba(59, 130, 246, 0.2);
            border-radius: 22px;
            outline: none;
            border: none;
            cursor: pointer;
        }

        .voice-option {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 8px;
            background: rgba(51, 65, 85, 0.3);
            min-height: 44px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .voice-option:hover {
            background: rgba(51, 65, 85, 0.5);
        }

        .voice-option.selected {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        /* Demo Controls */
        .demo-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(30, 41, 59, 0.9);
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #334155;
            z-index: 2000;
        }

        .demo-button {
            display: block;
            width: 100%;
            padding: 8px 12px;
            margin: 4px 0;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
        }

        .demo-button:hover {
            background: #2563eb;
        }

        /* Responsive adjustments */
        @media (max-width: 320px) {
            .reading-paragraph {
                font-size: 16px;
                line-height: 1.5;
            }
            
            .cefr-button {
                width: 32px;
                font-size: 11px;
            }
        }

        @media (min-width: 768px) {
            .mobile-container {
                max-width: 414px;
            }
            
            .reading-paragraph {
                font-size: 20px;
                line-height: 1.7;
            }
        }
    </style>
</head>
<body>
    <!-- Demo Controls -->
    <div class="demo-controls">
        <button class="demo-button" onclick="toggleInstallPrompt()">Toggle Install Prompt</button>
        <button class="demo-button" onclick="toggleSettings()">Toggle Settings</button>
        <button class="demo-button" onclick="simulatePlayback()">Simulate Playback</button>
    </div>

    <!-- Mobile Container -->
    <div class="mobile-container">
        <!-- Status Bar -->
        <div class="status-bar">
            <span>9:41</span>
            <span>üì∂ üì∂ üì∂ üì∂ üîã</span>
        </div>

        <!-- Mobile Header - 56px -->
        <header class="mobile-header">
            <div class="header-left">
                <div class="logo">B</div>
                <button class="hamburger-menu">‚ò∞</button>
            </div>
            
            <div class="cefr-selector">
                <button class="cefr-button">A1</button>
                <button class="cefr-button active">A2</button>
                <button class="cefr-button">B1</button>
                <button class="cefr-button">B2</button>
                <button class="cefr-button">C1</button>
                <button class="cefr-button">C2</button>
            </div>
        </header>

        <!-- Reading Content -->
        <main class="reading-content">
            <h1 class="book-title">Pride and Prejudice</h1>
            <p class="book-author">by Jane Austen</p>
            
            <div class="reading-paragraph">
                It is a <span class="word-highlight-upcoming">truth</span> <span class="word-highlight-upcoming">universally</span> <span class="word-highlight-current">acknowledged</span>, <span class="word-highlight-upcoming">that</span> <span class="word-highlight-upcoming">a</span> <span class="word-highlight-upcoming">single</span> <span class="word-highlight-upcoming">man</span> in possession of a good fortune, must be in want of a wife.
            </div>
            
            <div class="reading-paragraph">
                However little known the feelings or views of such a man may be on his first entering a neighbourhood, this truth is so well fixed in the minds of the surrounding families, that he is considered the rightful property of some one or other of their daughters.
            </div>
            
            <div class="reading-paragraph">
                "My dear Mr. Bennet," said his lady to him one day, "have you heard that Netherfield Park is let at last?" Mr. Bennet replied that he had not. "But it is," returned she; "for Mrs. Long has just been here, and she told me all about it."
            </div>
        </main>

        <!-- Navigation Edges -->
        <div class="navigation-edge navigation-edge-left" title="Previous Page"></div>
        <div class="navigation-edge navigation-edge-right" title="Next Page"></div>

        <!-- Mobile Audio Controls - Fixed Bottom -->
        <div class="mobile-audio-controls">
            <button class="secondary-audio-button" title="Previous">‚èÆ</button>
            <button class="primary-audio-button" id="playButton" title="Play/Pause">‚ñ∂</button>
            <button class="secondary-audio-button" title="Next">‚è≠</button>
            
            <div class="audio-progress-container">
                <div class="audio-progress-bar">
                    <div class="audio-progress-fill"></div>
                </div>
                <div class="audio-time-display">2:15</div>
            </div>
            
            <button class="secondary-audio-button" onclick="toggleSettings()" title="Settings">‚öô</button>
        </div>
    </div>

    <!-- PWA Install Prompt -->
    <div class="pwa-install-prompt" id="installPrompt">
        <div class="install-prompt-header">
            <div class="install-prompt-icon">üìö</div>
            <div>
                <div class="install-prompt-title">Install BookBridge</div>
                <div class="install-prompt-subtitle">Learn offline & save data</div>
            </div>
        </div>
        
        <ul class="install-benefits">
            <li class="install-benefit">
                <span style="color: #4CAF50;">‚úì</span>
                <span>Works offline - save 90% data usage</span>
            </li>
            <li class="install-benefit">
                <span style="color: #4CAF50;">‚úì</span>
                <span>Instant loading & smooth performance</span>
            </li>
            <li class="install-benefit">
                <span style="color: #4CAF50;">‚úì</span>
                <span>Personal progress tracking</span>
            </li>
        </ul>
        
        <div class="install-actions">
            <button class="install-button install-button-secondary" onclick="toggleInstallPrompt()">
                Maybe Later
            </button>
            <button class="install-button install-button-primary" onclick="simulateInstall()">
                Install App
            </button>
        </div>
    </div>

    <!-- Audio Settings Bottom Sheet -->
    <div class="audio-settings-sheet" id="settingsSheet">
        <div class="sheet-handle"></div>
        
        <div class="speed-control">
            <div class="control-label">Playback Speed</div>
            <input type="range" class="speed-slider" min="0.5" max="2" step="0.25" value="1">
            <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 12px; color: #94a3b8;">
                <span>0.5x</span>
                <span>1x Normal</span>
                <span>2x</span>
            </div>
        </div>
        
        <div class="voice-selection">
            <div class="control-label">Voice Selection</div>
            <div class="voice-option selected">
                <div>
                    <div style="font-weight: 600; color: #e2e8f0;">Alloy (Enhanced)</div>
                    <div style="font-size: 12px; color: #94a3b8;">Instant audio, word highlighting</div>
                </div>
                <button style="width: 32px; height: 32px; border-radius: 16px; background: #3b82f6; border: none; color: white;">‚ñ∂</button>
            </div>
            <div class="voice-option">
                <div>
                    <div style="font-weight: 600; color: #e2e8f0;">Nova (Enhanced)</div>
                    <div style="font-size: 12px; color: #94a3b8;">Instant audio, word highlighting</div>
                </div>
                <button style="width: 32px; height: 32px; border-radius: 16px; background: rgba(59, 130, 246, 0.2); border: 1px solid rgba(59, 130, 246, 0.3); color: #60a5fa;">‚ñ∂</button>
            </div>
        </div>
    </div>

    <script>
        let isPlaying = false;
        let currentWordIndex = 0;
        let playbackInterval;

        // Toggle install prompt
        function toggleInstallPrompt() {
            const prompt = document.getElementById('installPrompt');
            prompt.classList.toggle('show');
        }

        // Toggle settings sheet
        function toggleSettings() {
            const sheet = document.getElementById('settingsSheet');
            sheet.classList.toggle('open');
        }

        // Simulate app install
        function simulateInstall() {
            alert('App installed! üéâ\n\nBookBridge is now available on your home screen.');
            toggleInstallPrompt();
        }

        // Simulate audio playback with word highlighting
        function simulatePlayback() {
            const playButton = document.getElementById('playButton');
            const words = document.querySelectorAll('.word-highlight-current, .word-highlight-upcoming');
            
            if (!isPlaying) {
                isPlaying = true;
                playButton.textContent = '‚è∏';
                
                // Simulate word-by-word highlighting
                let wordIndex = 0;
                playbackInterval = setInterval(() => {
                    // Clear previous highlighting
                    document.querySelectorAll('.word-highlight-current').forEach(word => {
                        word.classList.remove('word-highlight-current');
                        word.classList.add('word-highlight-upcoming');
                    });
                    
                    // Highlight current word
                    if (wordIndex < words.length) {
                        words[wordIndex].classList.remove('word-highlight-upcoming');
                        words[wordIndex].classList.add('word-highlight-current');
                        wordIndex++;
                    } else {
                        // Reset and stop
                        isPlaying = false;
                        playButton.textContent = '‚ñ∂';
                        clearInterval(playbackInterval);
                    }
                }, 400); // 400ms per word
            } else {
                // Pause
                isPlaying = false;
                playButton.textContent = '‚ñ∂';
                clearInterval(playbackInterval);
            }
        }

        // CEFR button interactions
        document.querySelectorAll('.cefr-button').forEach(button => {
            button.addEventListener('click', function() {
                document.querySelectorAll('.cefr-button').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Close settings when clicking outside
        document.addEventListener('click', function(event) {
            const sheet = document.getElementById('settingsSheet');
            if (!sheet.contains(event.target) && !event.target.closest('button[onclick="toggleSettings()"]')) {
                sheet.classList.remove('open');
            }
        });

        // Demo: Show install prompt after 3 seconds
        setTimeout(() => {
            document.getElementById('installPrompt').classList.add('show');
        }, 3000);

        // Auto-hide install prompt after 10 seconds
        setTimeout(() => {
            document.getElementById('installPrompt').classList.remove('show');
        }, 13000);
    </script>
</body>
</html>